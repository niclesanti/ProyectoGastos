# Perfil de Desarrollo (dev) - Configuracion para entorno local

# Configuración de la base de datos PostgreSQL
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://db:5432/campito_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:campito_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:campito_pass}
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuración de HikariCP (Pool de Conexiones)
# Para desarrollo, se permiten más conexiones activas
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=0
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=20000

# Configuración de JPA/Hibernate - El control del esquema lo tiene Flyway
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Evitar que Hibernate haga validaciones constantes de metadatos
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# Configuracion de Google OAuth2 - Usar variables de entorno
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=openid,profile,email

# URL del frontend para CORS y redirecciones OAuth2
# En desarrollo local: http://localhost:3000 o http://localhost:5173
frontend.url=${FRONTEND_URL:http://localhost:3100}

# Configuración JWT para desarrollo
# Secret: debe ser una cadena larga (mínimo 256 bits para HS256)
# En desarrollo, usa un valor fijo. En producción DEBE ser variable de entorno.
jwt.secret=${JWT_SECRET:desarrollo_secreto_jwt_super_seguro_minimo_256_bits_12345678901234567890}
jwt.expiration=604800000

# === Configuracion de Swagger/OpenAPI ===
# Habilitar Swagger UI en desarrollo para facilitar el testing
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true

# === Configuracion de Logging ===

# Nivel de log general para toda la aplicacion
logging.level.root=INFO

# Nivel de log especifico para el paquete de nuestra aplicacion
# Esto nos permite ver mensajes DEBUG de nuestro propio codigo sin el ruido de las librerias
logging.level.com.campito.backend=DEBUG

# Nivel de log para frameworks especificos (ej. para reducir el ruido de Hibernate)
logging.level.org.hibernate=WARN
logging.level.org.springframework.web=INFO

# --- Salida de Logs en Archivo ---
# Nombre del archivo de log. Se guardara en el directorio raiz del proyecto.
logging.file.name=logs/backend-dev.log

# Patron para el nombre de los archivos de log rotados (cuando el principal alcanza un tamaño)
# logging.file.rolling-file-name=logs/backend-dev.%d{yyyy-MM-dd}.%i.log

# Tamaño maximo del archivo de log antes de rotar
# logging.file.max-size=10MB

# Numero maximo de archivos de log archivados a mantener
# logging.file.max-history=7

# Configuración del servidor para producción detrás de un proxy
server.forward-headers-strategy=FRAMEWORK

# URL del frontend para CORS y redirecciones
frontend.url=${FRONTEND_URL:http://localhost:3000}
